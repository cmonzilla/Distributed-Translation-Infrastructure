<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Basic Phrase Based Decoding: README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="owl.jpeg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Basic Phrase Based Decoding
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">C++ client/server language translation infrastructure</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_r_e_a_d_m_e_8md.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_r_e_a_d_m_e_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;#**The Basic Phrase-Based Statistical Machine Translation Tool**</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;**Author:** [Dr. Ivan S. Zapreev](https://nl.linkedin.com/in/zapreevis)</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;**Project pages:** [Git-Hub-Project](https://github.com/ivan-zapreev/Back-Off-Language-Model-SMT)</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;##Introduction</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;This is a fork project from the Back Off Language Model(s) for SMT project aimed at creating the entire phrase-based SMT translation infrastructure. This project follows a client/server architecture based on Web Sockets for C++ and consists of the three main applications:</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;+ **bpbd-client** - is a thin client to send the translation job requests to the translation server and obtain results</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;+ **bpbd-server** - the the translation server consisting of the following main components:</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    - *Decoder* - the decoder component responsible for translating text from one language into another</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    - *LM* - the language model implementation allowing for seven different trie implementations and responsible for estimating the target language phrase probabilities.</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    - *TM* - the translation model implementation required for providing source to target language phrase translation and the probabilities thereof.</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    - *RM* - the reordering model implementation required for providing the possible translation order changes and the probabilities thereof</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;+ **lm-query** - a stand-alone language model query tool that allows to perform language model queries and estimate the joint phrase probabilities.</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;To keep a clear view of the used terminology further we will provide some details on the phrase based statistical machine translation as given on the picture below, taken from [TAUS MT SHOWCASE slides](http://www.slideshare.net/TAUS/10-april-2013-taus-mt-showcase-mt-for-southeast-asian-languages-aw-ai-ti-institute-for-infocomm-18665069).</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;![Statistical Machine Translation Approach Image](./docs/images/smt/smt.jpg &quot;Statistical Machine Translation Approach&quot;)</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;The entire phrase-based statistical machine translation is based on learned statistical correlations between words and phrases of an example translation text, also called parallel corpus or corpora. Clearly, if the training corpora is large enough then it allows to cover most source/target language words and phrases and shall have enough information for approximating a translation of an arbitrary text. However, before this information can be extracted, the parallel corpora undergoes the process called _word alignment_ which is aimed at estimating which words/phrases in the source language correspond to which words/phrases in the target language. As a result, we obtain two statistical models:</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;1. The Translation model - providing phrases in the source language with learned possible target language translations and the probabilities thereof.</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;2. The Reordering model - storing information about probable translation orders of the phrases within the source text, based on the observed source and target phrases and alignment thereof.</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;The last model, possibly learned from a different corpus in a target language, is the Language model. Its purpose is to reflect the likelihood of this or that phrase in the target language to occur. In other words it is used to evaluate the obtained translation for being _sound_ in the target language.</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;With these three models at hand one can perform decoding, which is a synonym to a translation process. SMT decoding is performed by exploring the state space of all possible translations and reordering of the source language phrases within one sentence and then looking for the most probable translations, as indicated at the bottom part of the picture above.</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;The rest of the document is organized as follows:</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;1. [Project structure](#project-structure) - Gives the file and folder structure of the project</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;2. [Supported platforms](#supported-platforms) - Indicates the project supported platforms</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;3. [Building the project](#building-the-project) - Describes the process of building the project</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;4. [Using software](#using-software) - Explain how the software is to be used</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;5. [Input file formats](#input-file-formats) - Provides examples of the input file formats</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;6. [Code documentation](#code-documentation) - Refers to the project documentation</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;7. [External libraries](#external-libraries) - Lists the included external libraries</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;8. [Performance evaluation](#performance-evaluation) - Contains performance evaluation results</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;9. [General design](#general-design) - Outlines the general software design</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;10. [Software details](#software-details) - Goes about some of the software details</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;11. [Literature and references](#literature-and-references) - Presents the list of used literature</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;12. [Licensing](#licensing) - States the licensing strategy of the project</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;13. [History](#history) - Stores a short history of this document</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;##Project structure</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;This is a Netbeans 8.0.2 project, based on cmake, and its top-level structure is as follows:</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;* **`[Project-Folder]`**/</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    * **docs/** - contains the project-related documents including the Doxygen-generated code documentation and images</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    * **ext/** - stores the external header only libraries used in the project</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    * **inc/** - stores the C++ header files of the implementation</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    * **src/** - stores the C++ source files of the implementation</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    * **nbproject/** - stores the Netbeans project data, such as makefiles</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    * **data/** - stores the test-related data such as test models and query input files, as well as some experimental results</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    * default.cfg - an example server configuration file</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    * LICENSE - the code license (GPL 2.0)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    * CMakeLists.txt - the cmake build script for generating the project&#39;s make files</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    * README.md - this document</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    * Doxyfile - the Doxygen configuration file</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;##Supported platforms</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;This project supports two major platforms: Linux and Mac Os X. It has been successfully build and tested on:</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;* **Centos 6.6 64-bit** - Complete functionality.</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;* **Ubuntu 15.04 64-bit** - Complete functionality.</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;* **Mac OS X Yosemite 10.10 64-bit** - Limited by inability to collect memory-usage statistics.</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;**Notes:**</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;1. There was only a limited testing performed on 32-bit systems.</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;2. The project must be possible to build on Windows platform under [Cygwin](https://www.cygwin.com/).</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;##Building the project</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;Building this project requires **gcc** version &gt;= *4.9.1* and **cmake** version &gt;= 2.8.12.2.</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;The first two steps before building the project, to be performed from the Linux command line console, are:</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;+ `cd [Project-Folder]`</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;+ `mkdir build`</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;Further the project can be build in two ways:</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;+ From the Netbeans environment by running Build in the IDE</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    - In Netbeans menu: `Tools/Options/&quot;C/C++&quot;` make sure that the cmake executable is properly set.</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    - Netbeans will always run cmake for the DEBUG version of the project</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    - To build project in RELEASE version use building from Linux console</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;+ From the Linux command-line console by following the next steps</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    - `cd [Project-Folder]/build`</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    - `cmake -DCMAKE_BUILD_TYPE=Release ..` OR `cmake -DCMAKE_BUILD_TYPE=Debug ..`</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    - `make -j [NUMBER-OF-THREADS]` add `VERBOSE=1` to make the compile-time options visible</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;The binaries will be generated and placed into *./build/* folder. In order to clean the project from the command line run `make clean`. Cleaning from Netbeans is as simple calling the `Clean and Build` from the `Run` menu.</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;###Project compile-time parameters</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;For the sake of performance optimizations, the project has a number of compile-time parameters that are to be set before the project is build and can not be modified in the runtime. Let us consider the most important of them and indicate where all of them are to be found.</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;**Logging level:** Logging is important when debugging software or providing an additional user information during the program&#39;s runtime. Yet additional output actions come at a price and can negatively influence the program&#39;s performance. This is why it is important to be able to disable certain logging levels within the program not only during its runtime but also at compile time. The possible range of project&#39;s logging levels, listed incrementally, is: ERROR, WARNING, USAGE, RESULT, INFO, INFO1, INFO2, INFO3, DEBUG, DEBUG1, DEBUG2, DEBUG3, DEBUG4. One can limit the logging level range available at runtime by setting the `LOGER_M_GRAM_LEVEL_MAX` constant value in the `./inc/common/utils/logging/logger.hpp` header file. The default value is INFO3.</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;**Sanity checks:** When program is not running as expected, it could be caused by the internal software errors that are potentially detectable at runtime. This software has a number of build-in sanity checks that can be enabled/disabled at compile time by setting the `DO_SANITY_CHECKS` boolean flag in the `./inc/common/utils/exceptions.hpp` header file. Note that enabling the sanity checks does not guarantee that the internal error will be found but will have a negative effect on the program&#39;s performance. Yet, it might help to identify some of the errors with e.g. input file formats and alike.</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;**Server configs:** There is a number of translation server common parameters used in decoding, translation, reordering and language models. Those are to be found in the `./inc/server/server_configs.hpp`:</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;* `UNKNOWN_LOG_PROB_WEIGHT` - The value used for the unknown probability weight _(log10 scale)_</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;* `ZERO_LOG_PROB_WEIGHT` - The value used for the &#39;zero&#39; probability weight _(log10 scale)_</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;* `tm::NUM_TM_FEATURES` - The number of the translation model features, which defines the exact number of features read per entry from the translation model input file</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;* `tm::TM_MAX_TARGET_PHRASE_LEN` - The maximum length of the target phrase to be considered, this defines the maximum number of tokens to be stored per translation entry</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;* `lm::NUM_LM_FEATURES` - The number of language model features, the program currently supports only one value: `1`</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;* `lm::LM_M_GRAM_LEVEL_MAX` - The language model maximum level, the maximum number of words in the language model phrase</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;* `lm::LM_HISTORY_LEN_MAX` - **do not change** this parameter </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;* `lm::LM_MAX_QUERY_LEN` - **do not change** this parameter </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;* `lm::DEF_UNK_WORD_LOG_PROB_WEIGHT` - The default unknown word probability weight, for the case the `&lt;unk&gt;` entry is not present in the language model file _(log10 scale)_</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;* `rm::NUM_RM_FEATURES` - The number of reordering model features, the only two currently supported values are: `6` and `8`</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;**Decoder configs:** The decoder-specific parameters are located in `./inc/server/decoder/de_configs.hpp`:</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;* `MAX_WORDS_PER_SENTENCE` - The maximum allowed number of words/tokens per sentence to translate.</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;**LM configs:** The Language-model-specific parameters located in `./inc/server/lm/lm_configs.hpp`:</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;* `lm_word_index` - the word index type to be used, the possible values are:</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;     * `basic_word_index` - the basic word index that just loads the uni-grams in the same order as in the LM model file and gives them consecutive id values.</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;     * `counting_word_index` - the basic word index that counts the number of times the uni-gram occurs in the LM model file and gives lower ids to the more frequent uni-grams. This ensures some performance boost (within 10%) when querying certain types of language models but requires longer loading times.</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;     * `optimizing_word_index&lt;basic_word_index&gt;` - the optimizing word index is based on the linear probing hash map so it is the fastest, it uses a basic word index as a bootstrap word index for issuing the ids.</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;     * `optimizing_word_index&lt;counting_word_index&gt;` - the optimizing word index is based on the linear probing hash map so it is the fastest, it uses a counting word index as a bootstrap word index for issuing the ids.</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;     * `hashing_word_index` - the hashing word index is a discontinuous word index that does not issue the uni-gram ids consequently but rather associates each uni-gram with its hash value, the latter is taken to be a unique identifier. This is the only type of index supported by the hash-based `h2d_map_trie`.</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;* `lm_model_type` - the trie model type to be used, the possible values (trie types) are as follows, for a performance comparison thereof see [Performance Evaluation](#performance-evaluation):</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;     * `c2d_hybrid_trie&lt;lm_word_index&gt;` - contains the context-to-data mapping trie implementation based on `std::unordered` map and ordered arrays</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;     * `c2d_map_trie&lt;lm_word_index&gt;` - contains the context-to-data mapping trie implementation based on `std::unordered map`</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;     * `c2w_array_trie&lt;lm_word_index&gt;` - contains the context-to-word mapping trie implementation based on ordered arrays</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;     * `g2d_map_trie&lt;lm_word_index&gt;` - contains the m-gram-to-data mapping trie implementation based on self-made hash maps</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;     * `h2d_map_trie&lt;lm_word_index&gt;` - contains the hash-to-data mapping trie based on the linear probing hash map implementation</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;     * `w2c_array_trie&lt;lm_word_index&gt;` - contains the word-to-context mapping trie implementation based on ordered arrays</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;     * `w2c_hybrid_trie&lt;lm_word_index&gt;` - contains the word-to-context mapping trie implementation based on `std::unordered` map and ordered arrays</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;* `lm_model_reader` - the model reader is basically the file reader type one can use to load the model, currently there are three model reader types available, with `cstyle_file_reader` being the default:</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;     * `file_stream_reader` - uses the C++ streams to read from files, the slowest</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;     * `cstyle_file_reader` - uses C-style file reading functions, faster than `file_stream_reader`</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;     * `memory_mapped_file_reader` - uses memory-mapped files which are faster than the `cstyle_file_reader` but consume twice the file size memory (virtual RAM).</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;* `lm_builder_type` - currently there is just one builder type available: `lm_basic_builder&lt;lm_model_reader&gt;`.</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;Note that not all of the combinations of the `lm_word_index` and `lm_model_type` can work together, this is reported runtime after the program is build. Some additional details on the preferred configurations can be also found in the `./inc/server/lm/lm_consts.hpp` header file comments. The default, and the most optimal performance/memory ratio configuration, is:</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;* `lm_word_index` being set to `hashing_word_index`</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;* `lm_model_type` begin set to `h2d_map_trie&lt;lm_word_index&gt;`.</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;**TM configs:** The Translation-model-specific parameters are located in `./inc/server/tm/tm_configs.hpp`:</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;* `tm_model_type` - currently there is just one model type available: `tm_basic_model`</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;* `tm_model_reader` - the same as `lm_model_reader` for _&quot;LM configs&quot;_, see above</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;* `tm_builder_type` - currently there is just one builder type available: `tm_basic_builder&lt;tm_model_reader&gt;`</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;**RM configs:** The Reordering-model-specific parameters are located in `./inc/server/rm/rm_configs.hpp`:</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;* `rm_model_type` - currently there is just one model type available: `rm_basic_model`</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;* `rm_model_reader` - the same as `lm_model_reader` for _&quot;LM configs&quot;_, see above</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;* `rm_builder_type` - currently there is just one builder type available: `rm_basic_builder&lt;rm_model_reader&gt;`</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;##Using software</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;This section briefly covers how the provided software can be used for performing text translations. We begin with the **bpbd-server** and the **bpbd-client** then briefly talk about the **lm-query**. For information on the LM, TM and RM model file formats and others see section [Input file formats](#input-file-formats)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;###Translation server: _bpbd-server_ </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;The translation server is used to load language, translation and reordering models for a given source/target language pair and to process the translation requests coming from the translation client. When started from a command line without any parameters, **bpbd-server** reports on the available command-line options:</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;```</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;$ bpbd-server</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;&lt;...&gt;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;PARSE ERROR:  </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;             Required argument missing: config</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;Brief USAGE: </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   bpbd-server  [-d &lt;error|warn|usage|result|info|info1|info2|info3&gt;] -c</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                &lt;server configuration file&gt; [--] [--version] [-h]</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;For complete USAGE and HELP type: </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   bpbd-server --help</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;```</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;There are to complementing ways to configure the **bpbd-server**, the first one is the _configuration file_ and another is the _server console_. We consider both of them below in more details.</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;####Configuration file####</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;In order to start the server one must have a valid configuration file for it. The latter stores the minimum set of parameter values needed to run the translation server. Among other things, this config file specifies the location of the language, translation and reordering models, the number of translation threads, and the web socket port through which the server will accept requests. An example configuration file can be found in: `[Project-Folder]/default.cfg` and in `[Project-Folder]/data`. The content of this file is self explanatory and contains a significant amount of comments.</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;When run with a properly formed configuration file, **bpbd-server** gives the following output. Note the `-d info1` option ensuring additional information output during loading the models.</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;```</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;$ bpbd-server -c ../data/default-1-3.000.000.cfg -d info1</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;&lt;...&gt;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;USAGE: The requested debug level is: &#39;INFO1&#39;, the maximum build level is &#39;INFO3&#39; the set level is &#39;INFO1&#39;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;USAGE: Loading the server configuration option from: ../data/default-1-3.000.000.cfg</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;USAGE: Translation server from &#39;German&#39; into &#39;English&#39; on port: &#39;9002&#39; translation threads: &#39;25&#39;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;INFO: LM parameters: [ conn_string = ../data/models/e_30_2564372.lm, num_lm_feature_weights = 1, lm_feature_weights = [ 1 ] ]</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;INFO: TM parameters: [ conn_string = ../data/models/de-en-1-3.000.000.tm, num_tm_feature_weights = 4, tm_feature_weights = [ 1|1|1|1 ], translation_limit = 30, min_trans_prob = 1e-20 ]</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;INFO: RM parameters: [ conn_string = ../data/models/de-en-1-3.000.000.rm, num_rm_feature_weights = 6, rm_feature_weights = [ 1|1|1|1|1|1 ] ]</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;INFO: DE parameters: [ distortion = 5, ext_dist_left = 1, num_best_trans = 10, pruning_threshold = 1.1, stack_capacity = 100, word_penalty = -0.3, phrase_penalty = 1.2, max_source_phrase_len = 7, max_target_phrase_len = 7 ]</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;USAGE: --------------------------------------------------------</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;USAGE: Start creating and loading the Language Model ...</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;USAGE: Language Model is located in: ../data/models/e_30_2564372.lm</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;USAGE: Using the &lt;cstyle_file_reader.hpp&gt; file reader!</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;USAGE: Using the &lt;h2d_map_trie.hpp&gt; model.</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;INFO: The &lt;h2d_map_trie.hpp&gt; model&#39;s buckets factor: 2</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;INFO: Expected number of M-grams per level: [ 199164 4202658 15300577 26097321 31952150 ]</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;INFO1: Pre-allocating memory:  0 hour(s) 0 minute(s) 0 second(s) </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;INFO1: Reading ARPA 1-Grams:  0 hour(s) 0 minute(s) 0 second(s) </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;INFO1: Reading ARPA 2-Grams:  0 hour(s) 0 minute(s) 5 second(s) </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;INFO1: Reading ARPA 3-Grams:  0 hour(s) 0 minute(s) 27 second(s) </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;INFO1: Reading ARPA 4-Grams:  0 hour(s) 0 minute(s) 56 second(s) </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;INFO1: Reading ARPA 5-Grams:  0 hour(s) 1 minute(s) 16 second(s) </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;USAGE: Reading the Language Model took 170.276 CPU seconds.</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;USAGE: Action: &#39;Loading the Language Model&#39; memory change:</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;USAGE: vmsize=+1770 Mb, vmpeak=+1770 Mb, vmrss=+1771 Mb, vmhwm=+1771 Mb</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;USAGE: --------------------------------------------------------</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;USAGE: Start creating and loading the Translation Model ...</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;USAGE: Translation Model is located in: ../data/models/de-en-1-3.000.000.tm</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;USAGE: Using the &lt;cstyle_file_reader.hpp&gt; file reader!</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;USAGE: Using the hash-based translation model: tm_basic_model.hpp</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;INFO1: Counting phrase translations:  0 hour(s) 0 minute(s) 10 second(s) </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;INFO: The number of valid TM source entries is: 1620524</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;INFO1: Building translation model:  0 hour(s) 0 minute(s) 43 second(s) </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;USAGE: Reading the Translation Model took 58.8196 CPU seconds.</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;USAGE: Action: &#39;Loading the Translation Model&#39; memory change:</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;USAGE: vmsize=+550 Mb, vmpeak=+550 Mb, vmrss=+550 Mb, vmhwm=+550 Mb</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;USAGE: --------------------------------------------------------</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;USAGE: Start creating and loading the Reordering Model ...</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;USAGE: Reordering Model is located in: ../data/models/de-en-1-3.000.000.rm</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;USAGE: Using the &lt;cstyle_file_reader.hpp&gt; file reader!</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;USAGE: Using the hash-based reordering model: rm_basic_model.hpp</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;INFO1: Counting reordering entries:  0 hour(s) 0 minute(s) 6 second(s) </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;INFO: The number of RM source/target entries matching TM is: 2567397</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;INFO1: Building reordering model:  0 hour(s) 0 minute(s) 12 second(s) </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;USAGE: Reading the Reordering Model took 21.6754 CPU seconds.</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;USAGE: Action: &#39;Loading the Reordering Model&#39; memory change:</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;USAGE: vmsize=+78 Mb, vmpeak=+61 Mb, vmrss=+78 Mb, vmhwm=+61 Mb</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;USAGE: The server is started!</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;&lt;...&gt;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;```</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;In the first seven lines we see information loaded from the configuration file. Further, the LM, TM, and RM, models are loaded and the information thereof is provided. Note that for less output one can simply run `bpbd-server -c ../data/default-1-3.000.000.cfg`.</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;There is a few important things to note about the configuration file at the moment:</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;* `[Translation Models]/tm_feature_weights` - the number of features must be equal to the value of `tm::NUM_TM_FEATURES`, see [Project compile-time parameters](#project-compile-time-parameters).</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;* `[Translation Models]/tm_unk_features` - the number of features must be equal to the value of `tm::NUM_TM_FEATURES`, see [Project compile-time parameters](#project-compile-time-parameters).</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;* `[Reordering Models]/rm_feature_weights` - the number of features must be equal to the value of `lm::NUM_RM_FEATURES`, see [Project compile-time parameters](#project-compile-time-parameters).</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;* `[Language Models]/lm_feature_weights` - the number of features must be equal to the value of `lm::NUM_LM_FEATURES`, see [Project compile-time parameters](#project-compile-time-parameters).</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;####Server console####</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;Once the server is started it is not run as a Linux daemon but is a simple multi-threaded application that has its own interactive console allowing to manage some of the configuration file parameters and obtain some run-time information about the server. The list of available server console commands is given in the listing below:</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;```</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;$ bpbd-server -c ../data/default-1-3.000.000.cfg -d info2</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;&lt;...&gt;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;USAGE: The server is started!</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;USAGE: Available server commands: </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;USAGE:     &#39;q &amp; &lt;enter&gt;&#39;  - to exit.</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;USAGE:     &#39;h &amp; &lt;enter&gt;&#39;  - print HELP info.</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;USAGE:     &#39;r &amp; &lt;enter&gt;&#39;  - run-time statistics.</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;USAGE:     &#39;p &amp; &lt;enter&gt;&#39;  - print server parameters.</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;USAGE:     &#39;set ll &lt;level&gt; &amp; &lt;enter&gt;&#39;  - set log level.</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;USAGE:     &#39;set nt  &lt;positive integer&gt; &amp; &lt;enter&gt;&#39;  - set the number of worker threads.</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;USAGE:     &#39;set nbt &lt;unsigned integer&gt; &amp; &lt;enter&gt;&#39;  - set the number of best translations.</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;USAGE:     &#39;set d &lt;integer&gt; &amp; &lt;enter&gt;&#39;  - set the distortion limit.</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;USAGE:     &#39;set edl &lt;unsigned integer&gt; &amp; &lt;enter&gt;&#39;  - set the extra left distortion.</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;USAGE:     &#39;set pt &lt;unsigned float&gt; &amp; &lt;enter&gt;&#39;  - set pruning threshold.</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;USAGE:     &#39;set sc &lt;integer&gt; &amp; &lt;enter&gt;&#39;  - set stack capacity.</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;USAGE:     &#39;set wp &lt;float&gt; &amp; &lt;enter&gt;&#39;  - set word penalty.</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;USAGE:     &#39;set pp &lt;float&gt; &amp; &lt;enter&gt;&#39;  - set phrase penalty.</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;&gt;&gt; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;```</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;Note that, the commands allowing to change the translation process, e.g. the stack capacity, are to be used with great care. For the sake of memory optimization, **bpbd-server** has just one copy of the server runtime parameters used from all the translation processes. So in case of active translation process, changing these parameters can cause disruptions thereof starting from an inability to perform translation and ending with memory leaks. All newly scheduled or finished translation tasks however will not experience any disruptions.</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;###Translation client: _bpbd-client_</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;The translation client is used to communicate with the server by sending translation job requests and receiving the translation results. When started from a command line without any parameters, **bpbd-client** reports on the available command-line options:</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;```</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;$bpbd-client</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;&lt;...&gt;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;PARSE ERROR:  </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;             Required arguments missing: output-file, input-lang, input-file</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;Brief USAGE: </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   bpbd-client  [-d &lt;error|warn|usage|result|info|info1|info2|info3&gt;] [-t]</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                [-l &lt;min #sentences per request&gt;] [-u &lt;max #sentences per</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                request&gt;] [-p &lt;server port&gt;] [-s &lt;server address&gt;] [-o</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                &lt;target language&gt;] -O &lt;target file name&gt; -i &lt;source</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                language&gt; -I &lt;source file name&gt; [--] [--version] [-h]</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;For complete USAGE and HELP type: </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   bpbd-client --help</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;```</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;The translation client makes a web socket connection to the translation server, reads text from the input file and splits it into a number of translation job requests which are sent to the translation server. Note that, the input file is expected to have one source language sentence per line. The client has a basic algorithm for tokenising strings and putting them into the lower case, i.e. preparing the text for translation. Each translation job sent to the server consists of a number of sentences called translation tasks. The maximum and minimum number of translation tasks per a translation job is configurable via additional client parameters. For more info run: `bpbd-client --help`.</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;Once the translations are performed the resulting text is written to the output file. Each translated sentence is put on a separate line in the same order it was seen in the input file. Each line is prefixed with a translation status having a form: `&lt;status&gt;`. If a translation task was cancelled, or an error has occurred then it is indicated by the status and the information about that is also placed in the output file on the corresponding sentence line.</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;As always, running **bpbd-client** with higher logging levels will give more insight into the translation process and functioning of the client. It is also important to note that, the source-language text in the input file is required to be in the utf8 encoding.</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;###Language model query tool: _lm-query_</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;The language model query tool is used for querying stand alone language models to obtain the joint m-gram probabilities. When started from a command line without any parameters, **lm-query** reports on the available command-line options:</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;``` </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;$ lm-query </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;&lt;...&gt;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;PARSE ERROR:  </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;             Required arguments missing: query, model</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;Brief USAGE: </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   lm-query  [-l &lt;lm lambda weight&gt;] [-d &lt;error|warn|usage|result|info</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;             |info1|info2|info3&gt;] -q &lt;query file name&gt; -m &lt;model file name&gt;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;             [--] [--version] [-h]</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;For complete USAGE and HELP type: </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   lm-query --help</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;```</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;The language query tool has not changed much since the split-off from its official repository [Back Off Language Model SMT](https://github.com/ivan-zapreev/Back-Off-Language-Model-SMT). The tool&#39;s input file formats have not changed either, except for what is mentioned below. The main tool&#39;s changes are:</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;* Now it is not possible to have just a single m-gram probability query. The tool always computes the joint probability of all the m-grams in the query starting from 1 up to N and then with a sliding window of the N-grams where N is the maximum language model level. However, the information over the intermediate single m-gram probabilities is still provided in the tool&#39;s output.</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;* The length of the LM query is not limited by the maximum language model level N but is limited by a compile-time constant `lm::LM_MAX_QUERY_LEN`, see [Project compile-time parameters](#project-compile-time-parameters).</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;##Input file formats</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;In this section we briefly discuss the model file formats supported by the tools. We shall occasionally reference the other tools supporting the same file formats and external third-party web pages with extended format descriptions.</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;###Translation model: `*.tm`</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;The translation-model file stores the phrase pairs in the source and target languages and the pre-computed probability weights in the following strict format:</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;```</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;&lt;source-phrase&gt; ||| &lt;target-phrase&gt; ||| &lt;prob-1&gt; &lt;prob-2&gt; &lt;prob-3&gt; &lt;prob-4&gt;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;```</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;As generated by, e.g. [Moses](http://www.statmt.org/moses/?n=Moses.Tutorial). In general the source and target phrases and target phrase and probability weight sections are separated by five symbols: one space three vertical lines and one space. Source and target space words must be space separated, as well as the probability weights. At the moment, everything followed after the fourth probability, until the end of the line, is ignored. The tool supports `4` translation probabilities and the supported number of weights is defined by the `tm::NUM_TM_FEATURES` constant value, see [Project compile-time parameters](#project-compile-time-parameters). If the format is not followed, the program&#39;s behavior is not specified.</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;###Reordering model: `*.rm`</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;The reordering-model file stores the phrase pairs in the source and target languages and the reordering weights in the following strict format:</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;```</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;&lt;source-phrase&gt; ||| &lt;target-phrase&gt; ||| &lt;weight-1&gt; &lt;weight-2&gt; ... &lt;weight-k&gt;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;```</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;As generated by, e.g. [Moses](http://www.statmt.org/moses/?n=FactoredTraining.BuildReorderingModel). In general the source and target phrases and target phrase and probability weight sections are separated by five symbols: one space three vertical lines and one space. Source and target space words must be space separated, as well as the probability weights. At the moment, everything followed after the last probability, until the end of the line, is ignored. The number weights `k` is fixed per model file. The tool supports `6` or `8` reordering weights and the supported number of weights is defined by the `rm::NUM_RM_FEATURES` constant value, see [Project compile-time parameters](#project-compile-time-parameters). If the format is not followed, the program&#39;s behavior is not specified.</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;###Language model: `*.lm`</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;The language model file is a UTF8 text file in a well known ARPA format, see e.g. details on [MSDN help](https://msdn.microsoft.com/en-us/library/office/hh378460%28v=office.14%29.aspx) or [Speech Technology and Research (STAR) Laboratory](http://www.speech.sri.com/projects/srilm/manpages/ngram-format.5.html). An example ARPA file is given below:</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;```</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;&lt;header - information ignored by applications&gt;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;\data\</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;ngram 1=9</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;ngram 2=11</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;ngram 3=3</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;\1-grams:</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;-0.8953 &lt;unk&gt;        -0.7373</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;-0.7404 &lt;/s&gt; -0.6515</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;-0.7861 &lt;s&gt;   -0.1764</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;-1.0414 When -0.4754</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;-1.0414 will -0.1315</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;-0.9622 the   0.0080</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;-1.4393 Stock        -0.3100</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;-1.0414 Go    -0.3852</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;-0.9622 Up    -0.1286</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;\2-grams:</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;-0.3626 &lt;s&gt; When     0.1736</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;-1.2765 &lt;s&gt; the      0.0000</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;-1.2765 &lt;s&gt; Up       0.0000</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;-0.2359 When will    0.1011</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;-1.0212 will &lt;/s&gt;    0.0000</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;-0.4191 will the     0.0000</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;-1.1004 the &lt;/s&gt;     0.0000</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;-1.1004 the Go       0.0000</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;-0.6232 Stock Go     0.0000</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;-0.2359 Go Up        0.0587</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;-0.4983 Up &lt;/s&gt;      </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;\3-grams:</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;-0.4260 &lt;s&gt; When will      </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;-0.6601 When will the      </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;-0.6601 Go Up &lt;/s&gt;   </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;\end\</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;```</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;Note that the format is expected to be followed in a very strict way. The headers can be skipped, the empty lines must be empty, the M-gram entry: </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;```</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;&lt;probability&gt;    &lt;word-1&gt; &lt;word-2&gt; ... &lt;word-m&gt;    &lt;back-off-weight&gt;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;```</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;Must have one _tabulation_ symbol after the `&lt;probability&gt;`, single space between any two words, and a single _tabulation_ symbol before the `&lt;back-off-weight&gt;`. If the format is not followed, the program&#39;s behavior is not specified. The maximum allowed language model level, the maximum value of N in the N-gram, is defined by the compile-time parameter `lm::LM_M_GRAM_LEVEL_MAX`, see [Project compile-time parameters](#project-compile-time-parameters).</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;##Code documentation</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;At present the documentation is done in the Java-Doc style that is successfully accepted by Doxygen with the Doxygen option *JAVADOC_AUTOBRIEF* set to *YES*. The generated documentation is located in two folders:</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;* `[Project-Folder]/docs/html`</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    - Open the _index.html_ file located in this folder with your favorite web browser.</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;* `[Project-Folder]/docs/latex`</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    - Open the _refman.pdf_ file located in this folder with your favorite pdf viewer.</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;The `[Project-Folder]/Doxyfile` can be used to re-generate the documentation at any given time, for more details see [Doxygen](www.doxygen.org/).</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;* To re-build the Latex documentation run the following commands from the Linux console:</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    + `cd [Project-Folder]/docs/latex`</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    + `make`</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;##External libraries</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;At present this project uses the following external/third-party header-only libraries:</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;| Library Name | Purpose | Website | Version | Licence |</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;|:------------|:--------:|:-------:|:-------:|:-------:|</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;|Feather ini parser|_Fast, lightweight, header, portable INI/configuration file parser for ANSI C++._|[link](https://github.com/Turbine1991/feather-ini-parser)|1.40|[MIT](http://www.linfo.org/mitlicense.html)|</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;|WebSocket++|_Is an open source, header only C++ library implementing RFC6455 (The WebSocket Protocol)._|[link](http://www.zaphoyd.com/websocketpp)|0.6.0|[BSD](http://www.linfo.org/bsdlicense.html)|</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;|Asio C++ Library|_A cross-platform C++ library for network and low-level I/O programming_|[link](http://think-async.com/)|1.10.6|[Boost](http://www.boost.org/users/license.html)|</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;|Tclap|_A small and flexible library that provides a simple interface for defining and accessing command line arguments_|[link](http://tclap.sourceforge.net/)|1.2.1|[MIT](http://www.linfo.org/mitlicense.html)|</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;##Performance evaluation</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;In this section we provide an empirical comparison of the developed LM query tool with two other well known tools, namely [SRILM](http://www.speech.sri.com/projects/srilm/) and [KenLM](https://kheafield.com/code/kenlm/), both of which provide language model implementations that can be queried.  The additional information on the compared tools is to be found in [Appendix Tests](#appendix-tests)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;###Test set-up</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;The main target of this experimental comparison is to evaluate memory consumption and query times of the implemented tries. For doing that we do not rely on the time and memory statis- tics reported by the tools but rather, for the sake of uniform and independent opinion, rely on the Linux standard time utility available in the `zsh` Linux shell. The latter provides system- measured statistics about the program run. We choose to measure:</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;* **MRSS** - the maximum resident memory usage of the program</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;* **CPU time** - the CPU time in seconds</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;We chose to measure maximum resident memory usage as this is what defines the amount of RAM needed to run the program. Also, the CPU times are the actual times that the program was executed on the CPU. Measuring CPU times allows for a fair comparison as excludes possible results influence by the other system processes.</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;The experiments were set up to be run with different-size 5-gram language models given in the ARPA format with two types of inputs:</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;1. The single 5-gram query that defines the baseline</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;2. The file input with 100,000,000 of 5-gram queries</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;The delta in execution CPU times between the baseline and the 100,000,000 query files defines the pure query execution time of the tool. Note that, the query files were produced from the text corpus different from the one used to produce the considered language models. The MRSS values are reported in gigabytes (Gb) and the CPU times are measured in seconds. The plots provide MRSS and CPU times relative to the input model size in Gb.</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;The test hardware configuration and the model/query files&#39; data is to be found in [Appendix Tests](#appendix-tests)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;###Experimental results</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;The experimental results are present in the following two pictures. The first one indicates the changes in the MRSS depending on the model size: </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;![MRSS Comparisons Image](./docs/images/experiments/lm/mem.jpg &quot;MRSS Comparisons&quot;)</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;The second one shows the query CPU times depending on the model sizes:</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;![CPU Times Comparisons Image](./docs/images/experiments/lm/time.jpg &quot;CPU Times Comparisons&quot;)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;The results show that the developed LM model trie representations are highly compatible with the available state of the art tools. We also give the following usage guidelines for the implemented tries:</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;* **w2ca** and **c2wa** tries are beneficial for the machines with limited RAM. If low memory usage is very critical then bitmap hash caching can also be disabled.</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;* **c2dm** trie provides the fastest performance with moderate memory consumption. This is recommended when high performance is needed but one should be aware of possible m-gram id collisions.10</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;* **c2dh** trie is preferable if performance, as well as moderate memory consumption, is needed. This is the second-fastest trie which, unlike **c2dm**, is fully reliable.</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;* **w2ch** trie did not show itself useful and **g2dm** is yet to be re-worked and improved for better performance and memory usage.</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;* **h2dm** following the intuitions of the KenLM implementation, realizes the hash-map based trie using the linear probing hash map which turns to be the fastest trie with one of the best memory consumption. This tries type is used as a default one</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;##General design</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;This section describes the ultimate and the current designs of the provided software. Note that the designs below are schematic only and the actual implementation might deviate. Yet, they are sufficient to reflect the overall structure of the software. We first provide the ultimate design we are going to work for and then give some insights into the currently implemented version thereof. The designs were created using [Unified Modeling Language (UML)](http://www.uml.org/) with the help of the online UML tool called [UMLetino](http://www.umletino.com/).</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;###The ultimate design</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;Consider the deployment diagram below. It shows the ultimate design we are aiming at.</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;![The ultimate deployment Image](./docs/images/design/deployment_ideal.png &quot;The ultimate deployment&quot;)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;This design&#39;s main feature is that it is fully distributed, and consists of three, vertical, layers.</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;1. _The first layer_, located on the left side, is the front desk-load balancing piece of software who&#39;s responsibility is receiving the translation job requests from one language to another and then forwarding them to the second layer of the design performing load balancing.</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;2. _The second layer_, located in the middle of the picture, id a number of decoding servers that perform translation jobs. These servers can run decoders performing one-to-one language translation each, and there may be multiple instances of decoders for the same source/target language pair.  Alternatively, each decoder might be able to translate from a bunch of languages into a bunch of languages and all the middle level server instances run multiple copies of such decoders. Of course an intermediate variant is also possible.</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;3. _The third layer_, located on the right side, is the layer of various instances of the Language, Translation, and Reordering models. Once again, there can be multiple instances of the same model running to distribute the workload. Any decoder is free to use any and any number of model instances running in the third layer.</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;The communication between the layers here is suggested to be done using Web sockets as the fastest available asynchronous communication protocol available at the moment. In case of significant network communication overhead some of the system components can be run locally on the same physical computing unit or even be build into a monolith application for complete avoidance of the socket communications. The latter can be achieved by simply providing a local implementation of the needed system component. This approach is taken in the first version of the implemented software discussed in the next sub-section.</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;###The current design</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;Due to the limited time and as a proof of concept, the first version of the project follows the simplified version of the ultimate design given by the deployment diagram below.</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;![The current deployment Image](./docs/images/design/deployment_first.png &quot;The current deployment&quot;)</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;As one can notice, in this figure the first layer is removed, i.e. there is no load-balancing entity. Also the Language, Translation, and Reordering models have local interface implementations only and are compiled together with the decoder in a single application. One can easily extend this design towards the ultimate one by simply providing the remove implementations for the LM, TM and RM models using the existing libraries used in the current implementation.</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;Let us now briefly consider the two most complicated components of the software, the _Decoder_ and the _Language model_.</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;####The decoder component</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;The class diagram of the decoder component is given below. The decoder has a multi-threaded implementation, where each translation job (_a number of sentences to translate_) gets split into a number of translations tasks (_one task is one sentence_). Every translation task is executed in a separate thread. The number of translation threads is configurable at any moment of time.</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;![The decoder Image](./docs/images/design/decoder_component.png &quot;The decoder&quot;)</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;Let us consider the main classes from the diagram:</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;The _Decoder Impl_ is responsible for: receiving the Web socket session open and close requests; parsing the translation requests into translation jobs; scheduling the translation jobs to the _JobPool_; receiving the finished job notification; and sending the finished job reply to the client.</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;The _JobPool_ stores all the scheduled translation jobs and splits them into the translation tasks scheduled by the _TaskPool_. Once all the translation tasks of a translation job are finished the JobPool notifies the _Decoder Impl_.</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;The _TaskPool_ contains the queue of scheduled translation tasks and a limited number of translation worker threads to perform translations. In essence this is a thread pool entity with a queue of thread tasks.</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;The _TranslationTask_ is a sentence translation entity, its responsibility is to retrieve the preliminary information from the Language, Translation, and Reordering models and then to perform translations using the translation multi-_Stack_, and instances of _Level_ and _State_ classes. The latter represents the translation expansion hypothesis. At present the translation algorithm supports:</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;* Beam search </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;* Future cost estimates</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;* Threshold pruning of hypothesis</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;* Histogram pruning of hypothesis</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;* Hypothesis recombination</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;####The LM component</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;Let us now consider the LM implementation class/package diagram on the figure below:</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;![The LM component Image](./docs/images/design/lm_component.png &quot;LM component&quot;)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;The design of the Language model has not changed since the split off from the [Back Off Language Model SMT](https://github.com/ivan-zapreev/Back-Off-Language-Model-SMT) project. So for more details we refer to the [Implementation Details section](https://github.com/ivan-zapreev/Back-Off-Language-Model-SMT/blob/master/README.md#implementation-details) of the README.md thereof. Please note that, recently the project class, file and folder names have changed slightly to become more uniform across the LM, TM, and RM implementations. The latter can be a minor source of confusion when relating this diagram back to the source code. Still, the overall conceptual design is remained intact and is reflected by the diagram in a perfect way.</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;##Software details</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;In this section we provide some additional details on the structure of the provided software. We shall begin with the common packages and then move on to the binary specific ones. The discussion will not go into details and will be kept at the level of source file folder, explaining their content.</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;Note that, to the possible extend the software is implemented via the header files located in the `[Project-Folder]/inc`. Due to the C++ language restrictions some of the header files do have corresponding C++ source files located in `[Project-Folder]/src`. The latter, to the necessary extend, follows the structure and file names found in `[Project-Folder]/inc`. Therefore, further we will only concentrate on the content of the `[Project-Folder]/inc` folder.</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;Additional information about the source code implementation classes can be found in the project&#39;s [Code documentation](#code-documentation).</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;###_common packages_</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;The project&#39;s common packages are located in `[Project-Folder]/inc/common`:</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;* `/messaging` - web-socket message related classes common for the bpbd server and client</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;* `/utils` - various utility classes and libraries needed for logging and etc.</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    - `/containers` - some container type classes</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    - `/file` - file-reading related classes</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    - `/logging` - logging classes</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    - `/monitor` - memory usage and CPU times monitor classes</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;###_bpbd-client_</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;All of the *bpbd-client* specific implementation classes are located in `[Project-Folder]/inc/client`.</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;###_bpbd-server_</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;All of the *bpbd-server* specific implementation classes are located in `[Project-Folder]/inc/server`:</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;* `/common` - classes common to all server components</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    - `/models` - model-related classes common to all server components</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;* `/decoder` - classes used in the decoder component</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    - `sentence` - classes related to the top-level sentence decoding algorithms</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    - `stack` - the multi-stack classes related to the stack-based decoding algorithms</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;* `/tm` - the translation model classes</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    - `builders` - the model builder classes needed for reading the models</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    - `models` - the model representation classes</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    - `proxy` - the proxy objects implementing the local and/or remote model interface</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;* `/rm` - the reordering model classes</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    - The same as for `/tm`.</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;* `/lm` - the language model classes</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    - Similar to `/tm` and `/rm` but has some differences, see the next sub-section.</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;###_lm-query_</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;All of the *lm-query* specific implementation classes are located in `[Project-Folder]/inc/server/lm/`. The structure of this folder follows the general patters of that of `[Project-Folder]/inc/server/tm/` and `[Project-Folder]/inc/server/rm/` but has the following additional sub-folders:</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;* `/dictionaries` - dictionary/word-index related classes</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;* `/mgrams` - model and query m-gram related classes.</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;##Literature and references</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;This project is originally based on the following literature:</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;* Kenneth Heafield. &quot;Kenlm: Faster and smaller language model queries.&quot; [BibTex](./docs/bibtex/Heafield_WMT11.bib)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;* Philipp Koehn. &quot;Statistical Machine Translation&quot;. [BibTex](./docs/bibtex/Koehn_SMT_Book10.bib)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;* Mark Jan Nederhof, Giorgio Satta. &quot;Prefix Probability for Probabilistic Synchronous Context-Free Grammars&quot; [BibTex](./docs/bibtex/NederhofSatta_NLP11.bib)</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;* Adam Pauls, Dan Klein. &quot;Faster and Smaller N-Gram Language Models&quot; [BibTex](./docs/bibtex/PaulsKlein_ACL11.bib)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;* Daniel Robenek, Jan Platos, Vaclav Snasel. &quot;Efficient In-memory Data Structures for n-grams Indexing&quot; [BibTex](./docs/bibtex/RobenekPlatosSnasel_DATESO13.bib)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;* Andreas Stolcke, Jing Zheng, Wen Wang, Victor Abrash. &quot;SRILM at Sixteen: Update and Outlook&quot; [BibTex](./docs/bibtex/StolckeZhengWangAbrash_ASRU11.bib)</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;* Matthew Szudzik. &quot;An Elegant Pairing Function&quot; [BibTex](./docs/bibtex/Szudzik_NKS06.bib)</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;##Licensing</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;This is a free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;This software is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;You should have received a copy of the GNU General Public License along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;##History</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;* **21.04.2015** - Created</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;* **27.07.2015** - Changed project name and some to-do&#39;s</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;* **21.09.2015** - Updated with the latest developments preparing for the version 1, Owl release. </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;* **11.03.2016** - Updated to reflect the latest project status. </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;##Appendix Tests</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;###SRILM</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;Is a toolkit for building and applying statistical language models (LMs), primarily for use in speech recognition, statistical tagging and segmentation, and machine translation. It has been under development in the SRI Speech Technology and Research Laboratory since 1995. The employed tool version is **1.7.0**. The tool is run with the following command-line options:</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;```</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;% ngram -lm model-file -order 5 -ppl queries-file \</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      -no-sos -no-eos -memuse -debug 0</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;```</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;No changes were done to the tool’s source code.</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;###KenLM</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;KenLM is a tool for estimating, filtering, and querying language models. The tool does not have clear version indication, so we used the tool’s GitHub snapshot of the Git revision:</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;_0f 306088c3d8b3a668c934f 605e21b693b959d4d_</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;KenLM does not allow to switch off the probability reports from the command line. Therefore we had to modify the tool’s code. In the `kenlm/lm/ngram query.hh` file we commented out the output code lines as follows:</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;```</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;struct BasicPrint {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  void Word(StringPiece, WordIndex, const FullScoreReturn &amp;) const {}</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  void Line(uint64_t oov, float total) const {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    //std::cout &lt;&lt; &quot;Total: &quot; &lt;&lt; total &lt;&lt; &quot; OOV: &quot; &lt;&lt; oov &lt;&lt; ’\n’;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  void Summary(double, double, uint64_t, uint64_t) {}</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;};</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;struct FullPrint : public BasicPrint {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  void Word(StringPiece surface, WordIndex vocab,</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            const FullScoreReturn &amp;ret) const {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    //std::cout &lt;&lt; surface &lt;&lt; ’=’ &lt;&lt; vocab &lt;&lt; ’ ’</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    //&lt;&lt; static_cast&lt;unsigned int&gt;(ret.ngram_length)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    //&lt;&lt; ’ ’ &lt;&lt; ret.prob &lt;&lt; ’\t’;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  void Summary(double ppl_including_oov, double ppl_excluding_oov,</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;               uint64_t corpus_oov, uint64_t corpus_tokens) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    std::cout &lt;&lt;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      &quot;Perplexity including OOVs:\t&quot; &lt;&lt; ppl_including_oov &lt;&lt; &quot;\n&quot;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      &quot;Perplexity excluding OOVs:\t&quot; &lt;&lt; ppl_excluding_oov &lt;&lt; &quot;\n&quot;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      &quot;OOVs:\t&quot; &lt;&lt; corpus_oov &lt;&lt; &quot;\n&quot;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      &quot;Tokens:\t&quot; &lt;&lt; corpus_tokens &lt;&lt; ’\n’</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      ;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;} };</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;```</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;After this change, the tool was run with the following command-line options: 18</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;``` </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;% query -n model-file &lt; queries-file</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;```</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;###Hardware configuration</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;The experiments were run on the following machine configuration:</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;```</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;[~ smt7 ~]$ lscpu</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;Architecture:          x86_64</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;CPU op-mode(s):        32-bit, 64-bit</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;Byte Order:            Little Endian</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;CPU(s):                40</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;On-line CPU(s) list:   0-39</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;Thread(s) per core:    2</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;Core(s) per socket:    10</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;Socket(s):             2</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;NUMA node(s):          2</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;Vendor ID:             GenuineIntel</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;CPU family:            6</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;Model:                 62</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;Stepping:              4</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;CPU MHz:               1200.000</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;BogoMIPS:              4999.23</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;Virtualization:        VT-x</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;L1d cache:             32K</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;L1i cache:             32K</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;L2 cache:              256K</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;L3 cache:              25600K</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;NUMA node0 CPU(s):     0-9,20-29</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;NUMA node1 CPU(s):     10-19,30-39</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;[~ smt7 ~]$ lsb_release -irc</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;Distributor ID:    CentOS</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;Release:   6.7</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;Codename:  Final</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;[~ smt7 ~]$ grep MemTotal /proc/meminfo</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;MemTotal:       264496688 kB</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;```</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;###Language models and query files</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;The considered language models and their sizes (in bytes) are:</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;```</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;[~ smt10~]$ ls -al *.lm</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;-rw-r--r-- 1     937792965 Sep 21 15:55 e_10_641093.lm</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;-rw-r--r-- 1    1708763123 Sep 21 17:36 e_20_1282186.lm</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;-rw-r--r-- 1    3148711562 Sep 21 17:45 e_30_2564372.lm</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;-rw-r--r-- 1    5880154140 Sep 21 18:09 e_40_5128745.lm</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;-rw-r--r-- 1   10952178505 Sep 21 18:29 e_50_10257490.lm</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;-rw-r--r-- 1   15667577793 Sep 21 20:22 e_60_15386235.lm</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;-rw-r--r-- 1   20098725535 Sep 21 20:37 e_70_20514981.lm</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;-rw-r--r-- 1   48998103628 Sep 21 21:08 e_80_48998103628.lm</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;```</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;The considered query files and their sizes are:</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;```</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;[~ smt10 ~]$ ls -al q_5_gram_1*.txt</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;-rw-r--r-- 1   2697064872 Sep 21 15:47 q_5_gram_100.000.000.txt</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;-rw-r--r-- 1           35 Sep 21 15:57 q_5_gram_1.txt</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;[~ smt10 ~]$ </div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;```</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;The number of m-grams per model is:</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;#####e\_10\_641093.lm</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;```</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;[~ smt10 ~]$ head -n 15 e_10_641093.lm</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;\data\</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;ngram 1=105682</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;ngram 2=1737132</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;ngram 3=5121040</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;ngram 4=7659442</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;ngram 5=8741158</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;```</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;#####e\_20\_1282186.lm</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;```</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;[~ smt10 ~]$ head -n 8 e_20_1282186.lm</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;\data\</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;ngram 1=143867</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;ngram 2=2707890</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;ngram 3=8886067</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;ngram 4=14188078</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;ngram 5=16757214</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;```</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;#####e\_30\_2564372.lm</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;```</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;[~ smt10 ~]$ head -n 8 e_30_2564372.lm</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;\data\</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;ngram 1=199164</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;ngram 2=4202658</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;ngram 3=15300577</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;ngram 4=26097321</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;ngram 5=31952150</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;```</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;#####e\_40\_5128745.lm</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;```</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;[~ smt10 ~]$ head -n 8 e_40_5128745.lm</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;\data\</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;ngram 1=298070</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;ngram 2=6675818</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;ngram 3=26819467</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;ngram 4=48897704</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;ngram 5=62194729</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;```</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;#####e\_50\_10257490.lm</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;```</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;[~ smt10 ~]$ head -n 8 e_50_10257490.lm</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;\data\</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;ngram 1=439499</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;ngram 2=10447874</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;ngram 3=46336705</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;ngram 4=90709359</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;ngram 5=120411272</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;```</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;#####e\_60\_15386235.lm</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;```</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;[~ smt10 ~]$ head -n 8 e_60_15386235.lm</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;\data\</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;ngram 1=568105</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;ngram 2=13574606</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;ngram 3=63474074</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;ngram 4=129430409</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;ngram 5=176283104</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;```</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;#####e\_70\_20514981.lm</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;```</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;[~ smt10 ~]$ head -n 8 e_70_20514981.lm</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;\data\</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;ngram 1=676750</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;ngram 2=16221298</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;ngram 3=78807519</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;ngram 4=165569280</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;ngram 5=229897626</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;```</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;#####e\_80\_48998103628.lm</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;```</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;[~ smt10 ~]$ head -n 8 e_80_48998103628.lm</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;\data\</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;ngram 1=2210728</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;ngram 2=67285057</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;ngram 3=183285165</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;ngram 4=396600722</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;ngram 5=563533665</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;```</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;![Markdown Logo](./docs/images/markdown.png &quot;Markdown&quot;)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; _Powered by [Markdown-Cheatsheet](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet)_</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="_r_e_a_d_m_e_8md.html">README.md</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
